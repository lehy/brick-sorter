(this["webpackJsonpbrick-sorter"]=this["webpackJsonpbrick-sorter"]||[]).push([[0],{33:function(e){e.exports=JSON.parse('{"part":["Animal Body Part, Barb / Claw / Tooth / Talon / Horn, Medium","Animal Body Part, Barb / Claw / Tooth / Talon / Horn, Small","Antenna 1 x 4 with Rounded Top","Bar 1L with Clip [Cut Edges and One Side Hole]","Bar 3L","Bar 4L (Lightsaber Blade / Wand)","Bar 6L with Stop Ring","Baseplate 16 x 24 with Set 080 Large White House Print","Baseplate 16 x 24 with Set 080 Red House Print","Baseplate 16 x 24 with Set 080 Small White House Print","Baseplate 16 x 30 with Set 080 Yellow House Print","Bracket 1 x 2 - 1 x 2","Bracket 1 x 2 - 1 x 2 Inverted","Bracket 1 x 2 - 1 x 4 [Rounded Corners]","Bracket 1 x 2 - 1 x 4 [Square Corners]","Bracket 1 x 2 - 2 x 2","Bracket 1 x 2 - 2 x 2 Inverted","Brick 1 x 1","Brick 1 x 2","Brick 1 x 2 without Bottom Tube","Brick 1 x 2 x 2 with Inside Stud Holder","Brick 1 x 2 x 5 with Blocked Open Studs and Bottom Stud Holder with Asymmetric Ridges","Brick 1 x 3","Brick 1 x 4","Brick 1 x 6","Brick 1 x 8","Brick 2 x 2","Brick 2 x 2 Corner","Brick 2 x 3","Brick 2 x 4","Brick 2 x 6","Brick 2 x 8","Brick Curved 1 x 2 x 1 1/3 with Curved Top","Brick Curved 1 x 4 x 1 1/3 No Studs, Curved Top with Raised Inside Support","Brick Round 1 x 1 Open Stud","Brick Round 2 x 2 with Axle Hole","Brick Round Corner 2 x 2 Macaroni with Stud Notch","Brick Round Corner 2 x 2 Macaroni with Stud Notch and Reinforced Underside [New Style]","Brick Special 1 x 1 with Headlight and No Slot","Brick Special 1 x 1 with Stud on 1 Side","Brick Special 1 x 2 Palisade [aka Log]","Brick Special 1 x 2 with Grill","Brick Special 1 x 2 with Groove","Brick Special 1 x 2 with Masonry Brick Profile","Brick Special 1 x 2 with Studs on 1 Side","Brick Special 1 x 2 with Studs on 2 Sides","Brick Special 1 x 2 x 1 2/3 with Four Studs on One Side","Brick Special 1 x 4 Palisade [aka Log]","Brick Special 1 x 4 with 4 Studs on One Side","Brick Special 1 x 4 with Groove","Brick and Axle Separator v2.0","Cone 1 x 1 [No Top Groove]","Cone 1 x 1 [Top Groove]","Dish 2 x 2 Inverted [Radar]","Duplo Brick 2 x 2","Duplo Brick 2 x 4","Fence 1 x 4 x 1","Glass for Window 1 x 2 x 2 Flat","Glass for Window 1 x 2 x 3 Flat Front","Hinge Brick 1 x 2 Base","Hinge Brick 1 x 2 Top Plate Thin","Hinge Brick 2 x 2 Top Plate Thin","Hinge Plate 1 x 2 Locking with 2 Fingers On End, with Groove","Homemaker Bookcase 2 x 4 x 4","Panel 1 x 1 x 1 Corner","Panel 1 x 2 x 1 [Square Corners]","Plant, Carrot Top","Plant, Flower - Small","Plant, Flower Stem","Plant, Flower, Plate Round 1 x 1 with 4 Petals","Plant, Flower, Plate Round 1 x 1 with 5 Petals","Plant, Leaves 4 x 3","Plant, Plate 1 x 1 Round with 3 Leaves","Plant, Round 1 x 1 - 3 Bamboo Leaves","Plate 1 x 1","Plate 1 x 1 Rounded with Handle","Plate 1 x 10","Plate 1 x 12","Plate 1 x 2","Plate 1 x 3","Plate 1 x 4","Plate 1 x 6","Plate 1 x 8","Plate 2 x 10","Plate 2 x 12","Plate 2 x 16","Plate 2 x 2","Plate 2 x 2 Corner","Plate 2 x 3","Plate 2 x 4","Plate 2 x 6","Plate 2 x 8","Plate 4 x 4","Plate 4 x 6","Plate 4 x 8","Plate Round 1 x 1 with Open Stud","Plate Round 1 x 1 with Solid Stud","Plate Round 2 x 2 with Axle Hole Type 1 (+ Opening)","Plate Round 2 x 2 with Rounded Bottom [Boat Stud]","Plate Special 1 x 1 with Clip Horizontal [Thick Open O Clip]","Plate Special 1 x 1 with Clip Horizontal [Thick U Clip]","Plate Special 1 x 1 with Clip Light [Thick Ring]","Plate Special 1 x 1 with Clip Vertical [Thick Open O Clip]","Plate Special 1 x 1 with Clip Vertical [Thick U Clip]","Plate Special 1 x 1 with Tooth","Plate Special 1 x 2 5.9mm Centre Side Cup","Plate Special 1 x 2 5.9mm End Cup","Plate Special 1 x 2 Side Handle [Free Ends]","Plate Special 1 x 2 [Side Handle Closed Ends]","Plate Special 1 x 2 [Top Clip]","Plate Special 1 x 2 with 1 Stud with Groove (Jumper)","Plate Special 1 x 2 with 1 Stud with Groove and Inside Stud Holder (Jumper)","Plate Special 1 x 2 with 1 Stud without Groove (Jumper)","Plate Special 1 x 2 with 5.9mm Centre Side Ball","Plate Special 1 x 2 with Clip Horizontal on End","Plate Special 1 x 2 with Clip Horizontal on Side","Plate Special 1 x 2 with Clips Horizontal [Open O Clips]","Plate Special 1 x 2 with Door Rail","Plate Special 1 x 2 with Handle on End [Closed Ends]","Plate Special 1 x 2 with Pin Hole","Plate Special 1 x 2 with Pin Hole on Top","Plate Special 1 x 4 with 2 Studs","Plate Special 2 x 2 with 1 Pin Hole [Complete Underside Rib]","Plate Special 2 x 2 with 1 Pin Hole [Split Underside Ribs]","Plate Special 2 x 2 with 2 Pin Holes","Plate Special 2 x 2 with Groove and Center Stud (Jumper)","Plate Special 2 x 2 with Wheel Holder","Plate Special 2 x 2 with Wheel Holders","Plate Special 2 x 2 with Wheels Holder Wide","Plate Special 2 x 2 x 0.667 with Two Studs On Side and Two Raised","Pneumatic T-Piece (T Bar) [New Style]","Rock 1 x 2 Crystal Stepped","Slope 18\xb0 2 x 1 x 2/3 with 4 Slots","Slope 30\xb0 1 x 1 x 2/3 (Cheese Slope)","Slope 30\xb0 1 x 2 x 2/3","Slope 33\xb0 3 x 1","Slope 33\xb0 3 x 2","Slope 33\xb0 3 x 4","Slope 45\xb0 2 x 1 with 2/3 Cutout [New Version]","Slope 45\xb0 2 x 1 with Bottom Pin","Slope 45\xb0 2 x 2","Slope 45\xb0 2 x 4","Slope Curved 2 x 1 No Studs [1/2 Bow]","Slope Curved 2 x 2 x 2/3","Slope Curved 3 x 1 No Studs","Slope Inverted 33\xb0 3 x 1 (34\xb0)","Slope Inverted 33\xb0 3 x 2 [Connections between Studs]","Slope Inverted 45\xb0 2 x 1","Slope Inverted 45\xb0 2 x 2 [Ovoid Bottom Pin, Bar-sized Stud Holes]","Technic Axle 1.5 with Perpendicular Axle Connector (Technic Pole Reverser Handle)","Technic Axle 10","Technic Axle 12","Technic Axle 2","Technic Axle 2 Notched","Technic Axle 3","Technic Axle 3 with Stop","Technic Axle 3 with Stud","Technic Axle 4","Technic Axle 4 with Stop","Technic Axle 5","Technic Axle 5.5 With Stop [Rounded Short End]","Technic Axle 6","Technic Axle 7","Technic Axle 8","Technic Axle 8 with Stop","Technic Axle Connector Ridged [with x Hole x Orientation]","Technic Axle Connector Smooth [with x Hole + Orientation]","Technic Axle Connector with Axle Hole","Technic Axle Pin 3L with Friction Ridges Lengthwise and 1L Axle","Technic Axle Pin 3L with Friction Ridges Lengthwise and 2L Axle","Technic Axle Pin with Friction Ridges Lengthwise","Technic Axle Pin without Friction Ridges Lengthwise","Technic Axle Towball","Technic Axle and Pin Connector","Technic Axle and Pin Connector Angled #1","Technic Axle and Pin Connector Angled #2 - 180\xb0","Technic Axle and Pin Connector Angled #3 - 157.5\xb0","Technic Axle and Pin Connector Angled #4 - 135\xb0","Technic Axle and Pin Connector Angled #6 - 90\xb0","Technic Axle and Pin Connector Perpendicular","Technic Axle and Pin Connector Perpendicular 3L with 2 Pin Holes","Technic Axle and Pin Connector Perpendicular 3L with Centre Pin Hole","Technic Axle and Pin Connector Perpendicular Double","Technic Axle and Pin Connector Triple [120\xb0 Offset]","Technic Beam 1 x 11 Thick","Technic Beam 1 x 11.5 Double Bent Thick","Technic Beam 1 x 13 Thick","Technic Beam 1 x 15 Thick","Technic Beam 1 x 2 Thick with Pin Hole and Axle Hole","Technic Beam 1 x 2 Thin","Technic Beam 1 x 3 Thick","Technic Beam 1 x 3 Thin","Technic Beam 1 x 4 Thin","Technic Beam 1 x 4 Thin with Stud Connector","Technic Beam 1 x 5 Thick","Technic Beam 1 x 7 Thick","Technic Beam 1 x 9 Bent (6 - 4) Thick","Technic Beam 1 x 9 Thick","Technic Beam 2 x 4 L-Shape Thick","Technic Beam 3 x 3 L-Shape Thin","Technic Beam 3 x 5 L-Shape Thick","Technic Brick 1 x 1 with Hole","Technic Brick 1 x 10 [9 Holes]","Technic Brick 1 x 12 [11 Holes]","Technic Brick 1 x 16 [15 Holes]","Technic Brick 1 x 2 [1 Hole]","Technic Brick 1 x 2 [2 Holes]","Technic Brick 1 x 2 with Axle Hole Type 1 [+ Opening] and Bottom Pin","Technic Brick 1 x 2 with Axle Hole Type 2 [X Opening]","Technic Brick 1 x 4 [3 Holes]","Technic Brick 1 x 6 [5 Holes]","Technic Brick 1 x 8 [7 Holes]","Technic Bush","Technic Bush 1/2 Smooth with Axle Hole Reduced","Technic Bush 1/2 Smooth with Axle Hole Semi-Reduced","Technic Bush 1/2 Toothed Type I [+ Opening]","Technic Bush 1/2 Toothed Type II [X Opening]","Technic Gear 12 Tooth Bevel","Technic Gear 12 Tooth Double Bevel","Technic Gear 14 Tooth Bevel","Technic Gear 16 Tooth Reinforced [New Style]","Technic Gear 16 Tooth with Round Holes [Old Style]","Technic Gear 8 Tooth","Technic Gear Rack 1 x 4","Technic Link Tread","Technic Link Tread Wide with Two Pin Holes, Reinforced","Technic Link Tread with Beveled Edge","Technic Link, Reinforced, with Beveled Edge","Technic Pin 1/2","Technic Pin 1/2 with 2L Bar Extension","Technic Pin 3/4","Technic Pin Connector Hub Perpendicular 3L with 4 Pins","Technic Pin Connector Hub with 1 Pin with Friction Ridges Lengthwise","Technic Pin Connector Hub with 2 Perpendicular Axles","Technic Pin Connector Hub with 2 Pins with Friction Ridges Lengthwise","Technic Pin Connector Plate 1 x 2 x 1 2/3 [Two Holes On Top]","Technic Pin Connector Round 1L  [Beam]","Technic Pin Connector Round [Slotted]","Technic Pin Double with Axle Hole","Technic Pin Long with Friction Ridges Lengthwise","Technic Pin Long with Friction Ridges Lengthwise and Stop Bush","Technic Pin Long without Friction Ridges","Technic Pin with Friction Ridges Lengthwise and Center Slots","Technic Pin with Friction Ridges Lengthwise and Towball","Technic Pin with Friction Ridges Lengthwise, without Center Slots","Technic Pin without Friction Ridges Lengthwise","Technic Plate 2 x 4 [3 Holes]","Technic Plate 2 x 6 [5 Holes]","Technic Wedge Belt Wheel [aka Pulley]","Tile 1 x 1 with Groove","Tile 1 x 2 with Groove","Tile 1 x 3","Tile 1 x 4 with Groove","Tile 1 x 6 with Groove","Tile 1 x 8 with Groove","Tile 2 x 2 Round with Hole","Tile 2 x 2 with Groove","Tile 2 x 4 with Groove","Tile 6 x 6 with Bottom Tubes","Tile Round 1 x 1","Tile Round 1 x 1 Quarter","Tile Special 1 x 1 with Clip and Straight Tips","Tile Special 1 x 1 with Clip with Rounded Edges","Tile Special 1 x 2 Grille with Bottom Groove","Tile Special 1 x 2 with Handle","Tile Special 4 x 3 with 4 Studs in Centre","Tire Offset Tread 24 x 8","Turntable 2 x 2 Plate - Top","Turntable 2 x 2 Plate, Base","Tyre 14 x 4 Smooth Small Single","Tyre 14 x 4 Smooth Small Single [New Style]","Tyre 14 x 6 Solid Smooth","Tyre 14 x 9 Smooth Small Wide Slick","Tyre 15 x 6 Offset Tread Small","Tyre 15 x 6 Offset Tread Small with Band around Center","Tyre 21 x 12 with Offset Tread Small Wide","Tyre 21 x 12 with Offset Tread Small Wide and Center Band","Tyre 30.4 x 14 Offset Tread","Wedge Plate 6 x 3 Left","Wedge Plate 6 x 3 Right","Wheel 11 x 8 with Center Groove","Wheel 18 x 14 with Pin Hole, Fake Bolts and Shallow Spokes","Wheel 8 x 6","Wheel Skateboard / Trolley","Window 1 x 2 x 2 Flat Front","Windscreen 10 x 6 x 3 Bubble Canopy Double Tapered with Square Front Cutout"],"color":["Black","Blue","Bright Green","Bright Light Orange","Bright Light Yellow","Bright Pink","Dark Blue","Dark Bluish Gray","Dark Brown","Dark Gray","Dark Green","Dark Orange","Dark Pink","Dark Purple","Dark Red","Dark Tan","Dark Turquoise","Flat Silver","Green","Lavender","Light Bluish Gray","Light Gray","Lime","Magenta","Medium Azure","Medium Blue","Medium Dark Flesh","Medium Lavender","Metallic Silver","Orange","Pearl Dark Gray","Pearl Gold","Red","Reddish Brown","Sand Green","Tan","Trans-Black","Trans-Bright Green","Trans-Clear","Trans-Dark Blue","Trans-Dark Pink","Trans-Green","Trans-Light Blue","Trans-Neon Green","Trans-Neon Orange","Trans-Orange","Trans-Purple","Trans-Red","Trans-Yellow","White","Yellow"],"category":["Bars, Ladders and Fences","Baseplates","Bricks","Bricks Curved","Bricks Round and Cones","Bricks Sloped","Bricks Special","Containers","Duplo, Quatro and Primo","Hinges, Arms and Turntables","Panels","Plants and Animals","Plates","Plates Angled","Plates Round and Dishes","Plates Special","Pneumatics","Rock","Technic Axles","Technic Beams","Technic Bricks","Technic Bushes","Technic Connectors","Technic Gears","Technic Pins","Technic Special","Tiles","Tiles Round and Curved","Tiles Special","Tools","Wheels and Tyres","Windows and Doors","Windscreens and Fuselage"],"size":["10x6x3","11x8","14x4","14x6","14x9","15x6","16x24","16x30","18x14","1x1","1x10","1x11","1x12","1x13","1x15","1x16","1x1x1","1x1x2/3","1x2","1x2x1","1x2x2","1x2x2/3","1x2x3","1x2x5","1x3","1x4","1x4x1","1x5","1x6","1x7","1x8","1x9","21x12","24x8","2x1","2x10","2x12","2x16","2x1x2/3","2x2","2x2x0","2x2x2/3","2x3","2x4","2x4x4","2x6","2x8","3x1","3x2","3x3","3x4","3x5","4x14","4x3","4x4","4x6","4x8","6x3","6x6","8x6","unknown"]}')},43:function(e,i,n){},44:function(e,i,n){},49:function(e,i,n){"use strict";n.r(i);var t=n(5),o=n(0),a=n.n(o),c=n(8),l=n.n(c),r=(n(43),n(17)),h=(n(44),n(27),n(83)),x=n(85),s=n(15),d=n.n(s),T=n(22);var u=function(e){var i=e.backend,n=e.onSessionInitialized;function o(){return(o=Object(T.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("creating session"),i?(console.log("- creating session with backend ".concat(i)),t=new onnx.InferenceSession({backendHint:i})):(console.log("- creating session with no backend hint"),t=new onnx.InferenceSession),"./model.onnx",e.next=6,t.loadModel("./model.onnx");case 6:console.log("session is initialized"),console.log(t),n(t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.useEffect((function(){console.log("initializing session"),function(){o.apply(this,arguments)}()}),[i,n]),Object(t.jsx)(t.Fragment,{})},p=n(30),w=n.n(p);var S=function(e){var i=e.onImage,n=e.height,o=a.a.useRef(null);function c(){try{!function(){if(o.current){var e=o.current.getCanvas();if(e){var n=e.getContext("2d");if(n){for(var t=n.getImageData(0,0,e.width,e.height),a=Array(t.width*t.height*3).fill(0),c=t.width*t.height,l=0;l<t.height;++l)for(var r=0;r<t.width;++r)for(var h=0;h<3;++h)a[c*h+t.width*l+r]=t.data[4*(t.width*l+r)+h]/255;var x={rgb_chw:a,width:t.width,height:t.height};i(x)}else console.log("no canvas context")}else console.log("no canvas")}else console.log("no webcam ref yet")}(),setTimeout((function(){return c()}),200)}catch(e){console.log("handleDrawData raised an exception, not scheduling anymore")}}return a.a.useEffect((function(){c()}),[]),Object(t.jsx)(w.a,{audio:!1,ref:o,videoConstraints:{facingMode:"environment"},height:n})},P=n(86);var B=function(e){var i=e.predictions,n=[];return i.forEach((function(e,i){var o;o=e.proba?"".concat(e.value," (").concat((100*e.proba).toFixed(0),")"):"".concat(e.value),n.push(Object(t.jsx)(P.a,{label:i,value:o},i))})),Object(t.jsx)("div",{children:n})},g=n(32),k=n(33),m=50,v=.9;var C=function(e){var i=e.image,n=e.session,o=e.onPrediction;function c(e){for(var i=e.output,n=e.category,t=0,o=0,a=-1e12,c=0;c<i.length;++c){var l=i[c];l>=a&&(o=c,a=l),t+=Math.exp(l)}var r=Math.exp(a)/t;return{value:n[o],proba:r}}function l(e,i){var n,t=new Map,a=Object(g.a)(e);try{for(a.s();!(n=a.n()).done;){var l=n.value,r=l[0],h=k[r],x=c({output:l[1].data,category:h});t.set(r,x)}}catch(s){a.e(s)}finally{a.f()}t.set("dt",{value:"".concat(i.toFixed(0)," ms"),proba:null}),o(t)}function r(){return(r=Object(T.a)(d.a.mark((function e(i){var t,o,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return console.log("BrickPred: no session"),e.abrupt("return");case 3:return t=performance.now(),o=new onnx.Tensor(i.rgb_chw,"float32",[1,3,i.height,i.width]),e.prev=5,e.next=8,n.run([o]);case 8:a=e.sent,e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(5),console.log("error running session:"),console.log(e.t0),e.t0.message.includes("session not initialized")){e.next=17;break}throw e.t0;case 17:c=performance.now(),1,l(a,m=v*m+(1-v)*(c-t));case 22:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}return a.a.useEffect((function(){i&&n?function(e){r.apply(this,arguments)}(i):console.log("no image or no session: no pred")}),[i,n]),Object(t.jsx)(t.Fragment,{})};function f(e){var i=e.image,n=e.session,o=a.a.useState(new Map),c=Object(r.a)(o,2),l=c[0],h=c[1];return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(C,{image:i,onPrediction:h,session:n}),Object(t.jsx)(B,{predictions:l})]})}var b=function(e){var i=e.session,n=a.a.useState(null),o=Object(r.a)(n,2),c=o[0],l=o[1];return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(S,{onImage:l,height:224}),Object(t.jsx)(f,{image:c,session:i})]})},H=n(84),R=n(87),A=Object(H.a)((function(e){return Object(R.a)({root:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(1),padding:e.spacing(1),width:e.spacing(48)}}})}));var O=function(){var e=a.a.useState(null),i=Object(r.a)(e,2),n=i[0],o=i[1],c=a.a.useState("webgl"),l=Object(r.a)(c,2),s=l[0],d=(l[1],A());return Object(t.jsxs)("div",{className:"App",children:[Object(t.jsx)(x.a,{}),Object(t.jsx)(u,{backend:s,onSessionInitialized:o}),Object(t.jsx)("div",{className:d.root,children:Object(t.jsx)(h.a,{children:Object(t.jsx)(b,{session:n})})})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,89)).then((function(i){var n=i.getCLS,t=i.getFID,o=i.getFCP,a=i.getLCP,c=i.getTTFB;n(e),t(e),o(e),a(e),c(e)}))};l.a.render(Object(t.jsx)(a.a.StrictMode,{children:Object(t.jsx)(O,{})}),document.getElementById("root")),L(console.log)}},[[49,1,2]]]);
//# sourceMappingURL=main.0c7da44f.chunk.js.map